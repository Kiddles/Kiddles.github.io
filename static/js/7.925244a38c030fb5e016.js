webpackJsonp([7],{694:function(e,t,n){n(835);var i=n(267)(n(731),n(812),null,null);e.exports=i.exports},716:function(e,t,n){e.exports={default:n(717),__esModule:!0}},717:function(e,t,n){n(271),n(270),e.exports=n(720)},718:function(e,t,n){var i=n(173),r=n(52)("toStringTag"),s="Arguments"==i(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),r))?n:s?i(t):"Object"==(o=i(t))&&"function"==typeof t.callee?"Arguments":o}},719:function(e,t,n){var i=n(718),r=n(52)("iterator"),s=n(107);e.exports=n(75).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||s[i(e)]}},720:function(e,t,n){var i=n(76),r=n(719);e.exports=n(75).getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},731:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(716),r=n.n(i),s=n(17),a=n.n(s);t.default={data:function(){return{currentRoleId:"",roleList:[],auth:[],menuIsIndeterminate:!1,menuCheckAll:!1,menuName:"",menuPermission:[],menuList:[],userIsIndeterminate:!1,userCheckAll:!1,userName:"",userPermission:[],userList:[]}},created:function(){this.getPermission(),this.getRoleList(),this.getAuthList()},methods:{getPermission:function(){var e=this;e.$api.get(e.url.myPermission,{},function(t){if("ACK"===t.code){e.menuList=t.data;for(var n=!1,i=0;i<e.menuList.length;i++)"auth"===e.menuList[i].code&&(n=!0);n||e.$router.push("/")}else e.$message.error(t.message)},function(t){e.$message.error(t.message)},e.url.MOCK,"",!0)},saveAuth:function(){var e=this;if(e.currentRoleId){var t=e.menuPermission.concat(e.userPermission);e.$api.post(e.url.saveRoleAuth,{roleId:e.currentRoleId,listPermissionIds:t},function(t){"ACK"===t.code?e.$message.success(t.message):e.$message.error(t.message)},function(t){e.$message.error(t.message)},e.url.MOCK,"",!0)}else e.$message.warning("请选择要分配角色")},getIdS:function(e){var t=[],n=!0,i=!1,s=void 0;try{for(var a,o=r()(e);!(n=(a=o.next()).done);n=!0){var h=a.value;t.push(h.id)}}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return t},handleCheckAllChange1:function(e){var t=this,n=t.getIdS(t.auth[0].listChild);console.log(n),t.menuPermission=e.target.checked?n:[],t.menuIsIndeterminate=!1},handleCheckedChange1:function(e){var t=e.length;this.menuCheckAll=t===this.auth[0].listChild.length,this.menuIsIndeterminate=t>0&&t<this.auth[0].listChild.length},handleCheckAllChange2:function(e){var t=this,n=t.getIdS(t.auth[1].listChild);t.userPermission=e.target.checked?n:[],t.userIsIndeterminate=!1},handleCheckedChange2:function(e){var t=e.length;this.userCheckAll=t===this.auth[1].listChild.length,this.userIsIndeterminate=t>0&&t<this.auth[1].listChild.length},handleTreeList:function(){for(var e=this,t=0;t<e.auth.length;t++)0===t?(e.menuName=e.auth[t].name,e.menuPermission=e.auth[t].hasPermission,e.menuList=e.auth[t].listChild,e.menuCheckAll=e.auth[t].hasPermission.length===e.auth[t].listChild.length,e.menuIsIndeterminate=e.auth[t].hasPermission.length>0&&e.auth[t].hasPermission.length<e.auth[t].listChild.length):(e.userName=e.auth[t].name,e.userPermission=e.auth[t].hasPermission,e.userList=e.auth[t].listChild,e.userCheckAll=e.auth[t].hasPermission.length===e.auth[t].listChild.length,e.userIsIndeterminate=e.auth[t].hasPermission.length>0&&e.auth[t].hasPermission.length<e.auth[t].listChild.length)},getAuthList:function(){var e=this;e.$api.get(e.url.getAuthByRoleId+"0",{},function(t){"ACK"===t.code?(e.auth=t.data,e.handleTreeList()):e.$message.error(t.message)},function(t){e.$message.error(t.message)},e.url.MOCK,"",!0)},getAuthByRoleId:function(e){var t=this;t.$api.get(t.url.getAuthByRoleId+e.name,{},function(n){if(console.log(n),"ACK"===n.code){t.auth=n.data,t.handleTreeList();e.active;t.$nextTick(function(){t.roleList.forEach(function(e){a.a.set(e,"active",!1)}),a.a.set(e,"active",!0)}),t.currentRoleId=e.name}else t.$message.error(n.message)},function(e){t.$message.error(e.message)},t.url.MOCK,"",!0)},getRoleList:function(){var e=this;e.$api.get(e.url.getRoleList,{},function(t){"ACK"===t.code?(e.roleList=t.data.list,e.roleList.forEach(function(e){a.a.set(e,"active",!1)})):e.$message.error(t.message)},function(t){e.$message.error(t.message)},e.url.MOCK,"",!0)}}}},757:function(e,t,n){t=e.exports=n(74)(),t.push([e.i,".auth .form-title{height:60px;line-height:60px;border-bottom:1px solid #dde2d4}.auth .form-title .split-line{margin-top:20px}.auth .form-title .title{color:#475055;font-size:18px;margin-left:18px}.auth .auth-container{height:725px}.auth-container .auth-left{width:220px;height:100%;display:inline-block;background-color:#f2f2f2;border-right:1px solid #dde2e4;float:left;overflow-y:auto}.auth-container .auth-left .auth-item{height:50px;line-height:50px;text-align:center;font-size:14px}.auth-container .auth-left .auth-item.active{background-color:#fff;border-bottom:1px solid #dde2e4;color:#5e85e0}.auth-container .auth-right{overflow:auto;height:100%}.auth-container .auth-right .right-content{height:646px}.auth-container .auth-right .right-footer{height:38px;line-height:38px;padding:20px 0;text-align:center;border-top:1px solid #dde}.auth-container .auth-right .right-content .auth-type{width:270px;float:left;height:644px;border-right:1px solid #dde2e4}.auth-container .auth-right .right-content .auth-type-value{overflow:auto;height:644px}.right-content .auth-type .el-checkbox{display:block}.right-content .auth-type-value .el-checkbox-group .el-checkbox,.right-content .auth-type-value>.el-checkbox,.right-content .auth-type .el-checkbox{height:50px;line-height:50px;margin-left:20px}.right-content .auth-type-value>.el-checkbox{font-size:16px;font-weight:700}.right-content .auth-type .el-checkbox-group{height:100%}.right-content .el-checkbox-group .el-checkbox__input{margin-right:15px}.right-content .el-checkbox__input.is-checked+span{color:#5e85e0}.right-content .el-checkbox__input.is-checked .el-checkbox__inner{background-color:#5e85e0;border-color:#5e85e0}.right-content .el-checkbox__inner:hover{border-color:#5e85e0}.auth-type-value .el-checkbox-group{display:block;border-bottom:1px dashed #dde2e4;padding:0 0 20px}.auth .my-primary{width:96px;background-color:#5e85e0;color:#fff;border:0;height:38px}.auth .my-default{width:96px;border:1px solid #dde2e4;height:38px}.auth .el-checkbox__input.is-indeterminate .el-checkbox__inner{background-color:#5e85e0;border-color:#5e85e0}",""])},812:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("div",{staticClass:"main auth"},[e._m(0),e._v(" "),n("div",{staticClass:"auth-container"},[n("div",{staticClass:"auth-left"},[e._l(e.roleList,function(t){return[n("div",{staticClass:"auth-item",class:{active:t.active},on:{click:function(n){e.getAuthByRoleId(t)}}},[e._v(e._s(t.name))])]})],2),e._v(" "),n("div",{staticClass:"auth-right"},[n("div",{staticClass:"right-content"},[n("div",{staticClass:"auth-type-value"},[n("el-checkbox",{attrs:{indeterminate:e.menuIsIndeterminate},on:{change:e.handleCheckAllChange1},model:{value:e.menuCheckAll,callback:function(t){e.menuCheckAll=t},expression:"menuCheckAll"}},[e._v(e._s(e.menuName))]),e._v(" "),n("el-checkbox-group",{on:{change:e.handleCheckedChange1},model:{value:e.menuPermission,callback:function(t){e.menuPermission=t},expression:"menuPermission"}},[e._l(e.menuList,function(t){return[n("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])]})],2),e._v(" "),e.userName?[n("el-checkbox",{attrs:{indeterminate:e.userIsIndeterminate},on:{change:e.handleCheckAllChange2},model:{value:e.userCheckAll,callback:function(t){e.userCheckAll=t},expression:"userCheckAll"}},[e._v(e._s(e.userName))]),e._v(" "),n("el-checkbox-group",{on:{change:e.handleCheckedChange2},model:{value:e.userPermission,callback:function(t){e.userPermission=t},expression:"userPermission"}},[e._l(e.userList,function(t){return[n("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])]})],2)]:e._e()],2)]),e._v(" "),n("div",{staticClass:"right-footer"},[n("el-button",{staticClass:"my-primary",attrs:{type:"primary"},on:{click:e.saveAuth}},[e._v("提交")])],1)])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-title"},[n("div",{staticClass:"split-line"}),n("div",{staticClass:"title"},[e._v("权限管理")])])}]}},835:function(e,t,n){var i=n(757);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(268)("db87b30c",i,!0)}});