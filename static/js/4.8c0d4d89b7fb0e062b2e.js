webpackJsonp([4],{710:function(e,t,i){i(838);var o=i(267)(i(747),i(816),null,null);e.exports=o.exports},712:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5NTdEMkVENzU3NUFFNzExQjYyMEM1MDJGODcwMDVBMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBNUM0MjY2NTkxNTkxMUU3OUI3MzgwNzkwNDJBNDkxNCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBNUM0MjY2NDkxNTkxMUU3OUI3MzgwNzkwNDJBNDkxNCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgV2luZG93cyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjBDQzQ4OTczMzc5MUU3MTE4NUFBOUUyRUFCQUJEM0E4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjk1N0QyRUQ3NTc1QUU3MTFCNjIwQzUwMkY4NzAwNUEzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HaK3jgAAAZxJREFUeNqs1L1Lw0AYx/HUOkg7aKkO9QWcXIqDqKMiRRAdHAQRdHIU/TMcBKVugoO4ikgXQRBfsOBcEKvUSVDr4GSHttaK8XvlUc8zfQt94EPCpffLk/Qulm3bloMhRJFEDh94xD7m0Fxm3g9zIISY/VsqMI175LXxO4zXGtwvXalKYB6t2nUvxrCHT7npcrXgkBa6LiGVHnUCGbnBbKXgmBZq1SiCgtygwyl4WEKTNXRqWpW5G07BUbm4UGeoEsC7/MEeM/gKReOPqseJNBbWx5ssy+rGCzKWu7qWY6c+qIJ9eLPcl0eOPjP4Se7mdRncI8dnMziBFoy6DB5AHrdmcEzOV1wGH2IT2T+j8kFJyS6adLkyyu68iOz9VzmvNlF9AnaxBV+1j9CSdF2UrR10mKCeblE2xHedOoWXdotWM9hBGwq4xA2K6EUEAfUGsY0wRnCGaeT0d2xqxxoe7P+VxQEG5bd+xOXaud652bG58PvQJYs/jZQsLb38OJLlGsdUqfMGrQK98wvVeaOCzfDjSq/CTfllwwW/BBgAEOAEmdz+ES4AAAAASUVORK5CYII="},716:function(e,t,i){e.exports={default:i(717),__esModule:!0}},717:function(e,t,i){i(271),i(270),e.exports=i(720)},718:function(e,t,i){var o=i(173),a=i(52)("toStringTag"),n="Arguments"==o(function(){return arguments}()),l=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,i,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=l(t=Object(e),a))?i:n?o(t):"Object"==(r=o(t))&&"function"==typeof t.callee?"Arguments":r}},719:function(e,t,i){var o=i(718),a=i(52)("iterator"),n=i(107);e.exports=i(75).getIteratorMethod=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||n[o(e)]}},720:function(e,t,i){var o=i(76),a=i(719);e.exports=i(75).getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return o(t.call(e))}},747:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(716),a=i.n(o);t.default={data:function(){return{condition:{pageNum:1,pageSize:10,searchTxt:"",type:1,roleId:""},searchDto:{searchTxt:"",pageNum:1,pageSize:10,type:0,roleId:""},updateBtnText:"更新",updateing:!1,pageInfo1:{totalCount:0,pageCount:0},pageInfo2:{totalCount:0,pageCount:0},selectedUserIds:[],removeSelection:[],multipleSelection:[],labelPosition:"left",formLine:!0,userList:[],noRoleUserList:[],dialogFormVisible:!1,roleAddDto:{id:"",name:"",description:""},rules:{roleName:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],description:[{min:0,max:200,message:"长度在 0 到 200 个字符",trigger:"blur"}]}}},created:function(){this.getPermission(),this.setRoleId(),this.initRole(),this.initTable()},mounted:function(){this.initPage(1)},methods:{getPermission:function(){var e=this;e.$api.get(e.url.myPermission,{},function(t){if("ACK"===t.code){e.menuList=t.data;for(var i=!1,o=0;o<e.menuList.length;o++)"auth"===e.menuList[o].code&&(i=!0);i||e.$router.push("/")}else e.$message.error(t.message)},function(t){e.$message.error(t.message)},e.url.MOCK,"",!0)},backRole:function(){this.$router.push("/role")},handleOpen:function(){this.initTable2()},addUser:function(){this.dialogFormVisible=!0},deleteUser:function(){var e=this;0===e.removeSelection.length?e.$message({type:"info",message:"请选择要移除的用户"}):e.$confirm("确定移除用户吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.post(e.url.removeRole,{roleID:e.getId(),users:e.removeSelection},function(t){"ACK"===t.code?(e.$message.success(t.message),e.initTable()):e.$message.error(t.message)},function(t){e.$message.error(t.message)},e.url.MOCK,"",!0)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},setRoleId:function(){var e=this,t=e.getId();e.condition.roleId=t,e.searchDto.roleId=t},getId:function(){var e=location.href,t=location.href.indexOf("?");return e.substr(t).split("=")[1]},initRole:function(){var e=this,t=e.getId();e.$api.get(e.url.getRole+t,{},function(t){"ACK"===t.code?e.roleAddDto=t.data:e.$message.error(t.message)},function(){},e.url.MOCK)},submit:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.updateing=!0,t.updateBtnText="更新中";var i=t.roleAddDto;t.$api.put(t.url.updateRole,i,function(e){"ACK"===e.code?t.$message({type:"success",message:e.message}):t.$message.error(e.message),t.updateing=!1,t.updateBtnText="更新"},function(e){t.$message.error(e.message),t.updateing=!1,t.updateBtnText="更新"},t.url.MOCK,"",!0)})},handleSelectionChange:function(e){this.multipleSelection=[];var t=!0,i=!1,o=void 0;try{for(var n,l=a()(e);!(t=(n=l.next()).done);t=!0){var r=n.value;this.multipleSelection.push(r.userId)}}catch(e){i=!0,o=e}finally{try{!t&&l.return&&l.return()}finally{if(i)throw o}}console.log(this.multipleSelection)},handleRemoveSelectionChange:function(e){var t=this;t.removeSelection=[];var i=!0,o=!1,n=void 0;try{for(var l,r=a()(e);!(i=(l=r.next()).done);i=!0){var s=l.value;t.removeSelection.push(s.userId)}}catch(e){o=!0,n=e}finally{try{!i&&r.return&&r.return()}finally{if(o)throw n}}console.log(t.removeSelection)},addUserRole:function(){var e=this;0===e.multipleSelection.length?e.$message({type:"info",message:"请选择需分配的人员"}):e.$api.post(e.url.assignRole,{roleID:e.getId(),users:e.multipleSelection},function(t){"ACK"===t.code?(e.dialogFormVisible=!1,e.$message.success(t.message),e.multipleSelection=[],e.initTable()):e.$message.error(t.message)},function(t){e.$message.error(t.message)},e.url.MOCK,"",!0)},handleDel:function(e,t){var i=this;i.$confirm("确定删除该角色吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$api.delete(i.url.deleteRole+t.roleId,{},function(e){"ACK"===e.code?(i.$message({type:"success",message:e.message}),i.removeSelection=[],i.initTable()):i.$message({type:"error",message:e.message})},function(){},i.url.MOCK)}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},handleEdit:function(e){this.$router.push("/home")},showAdd:function(){this.dialogFormVisible=!0},searchRole:function(){this.searchDto.pageNum=1,this.initTable2()},handleCurrentChange:function(e){this.condition.pageNum=e,this.initTable()},handleDialogCurrentChange:function(e){this.searchDto.pageNum=e,this.initTable2()},initTable2:function(){var e=this;e.$api.post(e.url.noRoleUsers,e.searchDto,function(t){console.log(t),"ACK"===t.code?(e.noRoleUserList=t.data.list,e.searchDto.pageNum=t.data.pageNum,e.pageInfo2.totalCount=t.data.total,e.pageInfo2.pageCount=t.data.pages,e.initPage(2)):e.$message.error(t.message)},function(t){e.$message.error(t.message)},e.url.MOCK,"",!0)},initTable:function(){var e=this;e.$api.post(e.url.haveRoleUsers,e.condition,function(t){console.log(t),"ACK"===t.code?(e.userList=t.data.list,e.condition.pageNum=t.data.pageNum,e.pageInfo1.totalCount=t.data.total,e.pageInfo1.pageCount=t.data.pages,e.initPage(1)):e.$message.error(t.message)},function(t){e.$message.error(t.message)},e.url.MOCK,"",!0)},initPage:function(e){var t=this;document.getElementById("myPages"+e)&&document.getElementById("myPages"+e).parentNode.removeChild(document.getElementById("myPages"+e));var i;i=1===e?t.pageInfo1.pageCount:t.pageInfo2.pageCount;var o="数据，共"+i+"页，",a=document.createElement("span");a.id="myPages"+e;var n=document.createTextNode(o);a.appendChild(n);var l=document.getElementById("page"+e),r=l.lastChild;l.insertBefore(a,r)}}}},760:function(e,t,i){t=e.exports=i(74)(),t.push([e.i,".role-detail .role-container{padding:20px}.role-detail .el-form--label-left .el-form-item__label{text-align:right}.role-detail .el-card__header{padding:10px 20px 10px 0;border-bottom:0}.role-detail .el-card{border:0;border-radius:0;box-shadow:none;font-weight:700}.role-detail .el-card__body{padding:0}.role-detail .delete,.role-detail .edit{width:20px;height:22px;cursor:pointer}.role-detail .edit{margin-right:13px}.role-detail .el-input__inner{width:180px;height:38px;line-height:38px;color:#545358}.role-detail .my-search{height:40px;width:40px;background-color:#5785e0;padding:0;border-radius:4px;border:0}.role-detail .form-title{height:60px;line-height:60px}.role-detail .form-title .split-line{margin-top:20px}.role-detail .form-title .title{color:#475055;font-size:18px;margin-left:18px}.role-detail .add{position:absolute;top:11px;left:10px;height:18px;width:18px}.role-detail .my-add{height:40px;line-height:40px;padding:0;width:104px;border:1px solid #5484e0;color:#5484e0}.role-detail-detail .my-add span{margin-left:10px}.role-detail-dialog .el-dialog__body{padding-left:70px;padding-right:70px}.role-detail-dialog .el-form--inline .el-form-item.left-item{margin-right:49px}.role-detail .my-larger .el-input__inner,.role-detail .my-larger .el-textarea__inner{width:494px;height:38px!important}.role-detail .el-input__inner:focus,.role-detail .el-textarea__inner{border-color:#5e85e0}.role-dialog .el-dialog{width:732px!important}.role-detail .el-checkbox__inner:hover{border-color:#5e85e0}.role-detail .el-checkbox__input.is-checked .el-checkbox__inner{background-color:#5e85e0;border-color:#5e85e0}",""])},816:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content"},[o("div",{staticClass:"main role-detail"},[e._m(0),e._v(" "),o("div",{staticClass:"role-container"},[o("el-form",{ref:"ruleForm",attrs:{inline:e.formLine,"label-position":e.labelPosition,"label-width":"70px",model:e.roleAddDto,rules:e.rules}},[o("el-form-item",{attrs:{label:"角色名称"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.roleAddDto.name,callback:function(t){e.$set(e.roleAddDto,"name",t)},expression:"roleAddDto.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"描述"}},[o("el-input",{model:{value:e.roleAddDto.description,callback:function(t){e.$set(e.roleAddDto,"description",t)},expression:"roleAddDto.description"}})],1),e._v(" "),o("el-form-item",{attrs:{label:""}},[o("el-button",{staticClass:"my-primary",attrs:{type:"primary",loading:e.updateing},on:{click:function(t){e.submit("ruleForm")}}},[e._v(e._s(e.updateBtnText))]),e._v(" "),o("el-button",{attrs:{type:"default"},on:{click:e.backRole}},[e._v("返回")])],1)],1),e._v(" "),o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",{staticStyle:{"line-height":"36px"}},[e._v("已分配人员列表")]),e._v(" "),o("el-button",{staticStyle:{float:"right"},attrs:{type:"default"},on:{click:e.deleteUser}},[e._v("移除用户")]),e._v(" "),o("el-button",{staticClass:"my-primary",staticStyle:{float:"right","margin-right":"20px"},attrs:{type:"primary"},on:{click:e.addUser}},[e._v("添加用户")])],1)]),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList},on:{"selection-change":e.handleRemoveSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{prop:"staffId",label:"工号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"姓名"}})],1),e._v(" "),o("div",{staticClass:"pagination"},[o("el-pagination",{attrs:{layout:"prev, pager, next, total, jumper",total:e.pageInfo1.totalCount,"current-page":e.condition.pageNum,id:"page1"},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),o("el-dialog",{staticClass:"role-detail-dialog",attrs:{title:"待分配人员列表",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},open:e.handleOpen}},[o("el-form",{attrs:{"label-width":"78px",inline:!0}},[o("el-form-item",{attrs:{label:""}},[o("el-input",{attrs:{placeholder:"请输入搜索条件"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchRole(t)}},model:{value:e.searchDto.searchTxt,callback:function(t){e.$set(e.searchDto,"searchTxt",t)},expression:"searchDto.searchTxt"}}),e._v(" "),o("el-input",{staticStyle:{display:"none"}})],1),e._v(" "),o("el-form-item",{attrs:{label:""}},[o("el-button",{staticClass:"my-search",on:{click:e.searchRole}},[o("img",{attrs:{src:i(712)}})])],1)],1),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.noRoleUserList},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{prop:"staffId",label:"工号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"姓名"}})],1),e._v(" "),o("div",{staticClass:"pagination"},[o("el-pagination",{attrs:{layout:"prev, pager, next, total, jumper",total:e.pageInfo2.totalCount,"current-page":e.searchDto.pageNum,id:"page2"},on:{"current-change":e.handleDialogCurrentChange}})],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addUserRole("ruleForm")}}},[e._v("确定")])],1)],1)],1)])])},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-title"},[i("div",{staticClass:"split-line"}),i("div",{staticClass:"title"},[e._v("角色配置")])])}]}},838:function(e,t,i){var o=i(760);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(268)("3f825649",o,!0)}});